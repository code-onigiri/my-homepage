---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 5);
---

<BaseLayout title="Home — code-onigiri">

  <section class="hero">
    <h1>code-onigiriのホームページ</h1>
  </section>

  <section class="border-l-3 border-[var(--border)] pl-4">
    <h2>なんやねんこいつ(自己紹介)</h2>
    <p>名古屋県在住の学生プログラマー</p>
    <p>おにぎり、というか食べ物全般が好き。</p>
    <p>好きな言語：Rust,Java,TypeScript,C++</p>
    <p>好きなフレームワークとかライブラリソフト系列：React,Svelte,Alpine.js/NeoForge/Godot,bevy</p>
    <p>好きなゲーム：Minecraft,Factorio.....ないか...</p>
    <p>何かになれるようでなれない人間（似非哲学）</p>
    <p>新しい物大好きマン、oxclintが最近のお気に入り。</p>
    <p>特徴：コード書くの遅いし、しょっちゅうAIに頼ってるし、詭弁ばっか振りかざす人、あと広く浅くしか理解していない。</p>
  </section>

  <section class="border-l-3 border-[var(--border)] pl-4">
    <h2>最新の記事</h2>
    {posts.length > 0 ? (
      <ul class="list-none m-0 p-0 flex flex-col gap-4">
        {posts.map((post) => (
          <li>
            <a class="no-underline" href={`/blog/${post.slug}/`}>
              <div class="text-sm muted">{post.data.date.toISOString().slice(0, 10)}</div>
              <h3 class="m-0 mt-1 text-lg font-semibold">{post.data.title}</h3>
              {post.data.description && <p class="muted m-0 mt-1">{post.data.description}</p>}
            </a>
          </li>
        ))}
      </ul>
    ) : (
      <p class="muted">まだ記事がありません。</p>
    )}
    <div class="mt-4">
      <a href="/blog/" class="text-sm">すべての記事を見る →</a>
    </div>
  </section>


</BaseLayout>